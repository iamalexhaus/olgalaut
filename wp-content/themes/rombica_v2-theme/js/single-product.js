var is_body_touch,product_section,product_scene,scene_scrolltop,scrollbar_width=get_scrollbar_width(),isWebkit="WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),PIXEL_STEP=10,LINE_HEIGHT=30,PAGE_HEIGHT=800,aside_specs_opened=null;function init_slider(){if($("#hero_slider").length){var l,c,u,e=$(".slider-index__dot-wrapper"),h=$(".card-slider-index, .card-slider-single-product").eq(0),p=e.eq(0),g=p,_=!0;f(h),e.on("click",function(){!function(e){var t=e;_=!1,clearTimeout(l),clearTimeout(u),c=l=null;var i=$("article.current");i.find(".slide-mask").removeClass("animating"),i.find(".slide-background").removeClass("animating"),g.find("svg").remove(),g.find(".slider-index__dot").removeClass("slider-index__dot--current"),$(".card-slider-single-product.current, .card-slider-index.current").removeClass("current");var o=(g=t).attr("id");c=new ProgressBar.Circle("#"+o,{strokeWidth:3,easing:"",duration:5e3,color:"#000",trailColor:"#eee",trailWidth:1,svgStyle:null});g.find(".slider-index__dot").addClass("slider-index__dot--current");c.animate(1);var n=t.data("id"),s=t.parent().siblings("article[data-id="+n+"]").addClass("current"),a=s.find(".slide-mask").addClass("animating"),r=s.find(".slide-background").addClass("animating"),d=s.find(".card-slider-index__title, .card-slider-index__subtitle").addClass("is-revealed");setTimeout(function(){!0},1e3),setTimeout(function(){d.removeClass("is-revealed")},4e3),u=setTimeout(function(){_&&!1},4e3),l=setTimeout(function(){_=!0,a.removeClass("animating"),r.removeClass("animating"),g.find("svg").remove(),g.find(".slider-index__dot").removeClass("slider-index__dot--current");var e=g.next();g=0===e.length?p:e;var t=s.removeClass("current").next("article");0===t.length&&(t=h),f(t)},5e3)}($(this))})}function f(t){!1;var e=t.find(".card-slider-index__title, .card-slider-index__subtitle").addClass("is-revealed");setTimeout(function(){!0},1e3),setTimeout(function(){e.removeClass("is-revealed")},4e3),u=setTimeout(function(){_&&!1},4e3);var i=g.attr("id");c=new ProgressBar.Circle("#"+i,{strokeWidth:3,easing:"",duration:5e3,color:"#000",trailColor:"#eee",trailWidth:1,svgStyle:null});var o=g.find(".slider-index__dot");o.addClass("slider-index__dot--current"),c.animate(1),t.addClass("current");var n=t.find(".slide-mask").addClass("animating"),s=t.find(".slide-background").addClass("animating");l=setTimeout(function(){if(_){!0,n.removeClass("animating"),s.removeClass("animating"),g.find("svg").remove(),o.removeClass("slider-index__dot--current"),0===(g=g.next()).length&&(g=p);var e=t.removeClass("current").next("article");0===e.length&&(e=h),f(e)}},5e3)}}function init_product_description(){$(".single-product-about__overview");var t,h,i=$(".single-product-about__left"),e=$(".single-product-about__right"),r=$(".single-product-about__media"),p=$(".single-product-about__media-item"),o=(r.offset().top,r.height(),product_section=$(".single-product-about")),d=o.offset().top,g=$(".single-product-about__dots"),n=$(".single-product-about__dot-wrapper"),s=n.find(".single-product-about__dot--current"),_=$(".single-product-about__media-item[data-current]"),f=_.attr("data-id"),a=window.orientation;if(is_body_touch||isWebkit||r.css("margin-left",scrollbar_width+"px"),1<p.length){var l=0,c=new ScrollMagic.Controller,u=product_scene=new ScrollMagic.Scene({triggerElement:".single-product-about",triggerHook:0,reverse:!0}).addTo(c);u.on("progress",function(){var e=u.progress();r.scrollTop(l*e)})}else g.addClass("is-hidden");function v(){$window.width();if(t=!1,window.matchMedia(mp).matches)return t=!0,1<p.length&&(u.enabled(!1),u.removePin(!0),r[0].removeEventListener("touchstart",w),r[0].removeEventListener("touchend",b),m(),$window.on("scroll",m)),p.each(function(){$(this).removeClass("below")}),void(i.is(".zoom")&&(i.removeClass("zoom"),e.removeClass("hide")));1<p.length&&(is_body_touch&&(r[0].addEventListener("touchstart",w),r[0].addEventListener("touchend",b)),l=o.height()*(p.length-1),u.duration(l),u.enabled(!0).setPin(o[0]),g.css("display","block"),$window.off("scroll",m),r.scrollTop(_.position().top)),p.each(function(){var e=$(this);e.is(":below-the-fold")&&e.addClass("below")}),$window.on("scroll",function(){p.each(function(){if(!t){var e=$(this);e.is(":in-viewport")&&e.removeClass("below"),e.is(":below-the-fold")&&e.addClass("below")}})}),1<p.length&&r.on("scroll",function(){p.each(function(){if(!t){var e=$(this);e.is(":in-viewport")&&e.removeClass("below"),e.is(":below-the-fold")&&e.addClass("below")}})})}function m(){var e,t=window.screen.height,i=$window.height(),o=$window.scrollTop(),n=p.filter(":first-child")[0].getBoundingClientRect(),s=p.filter(":last-child").offset(),a=_.next(),r=a.length?a.height():"",d=a.length?a[0].getBoundingClientRect().top:"",l=_.prev(),c=l.length?l.height():"",u=l.length?l[0].getBoundingClientRect().top:"";e=h<o,h=o,i-n.bottom>=n.top-header_height&&o<=s.top-header_height?g.css("display","block"):g.css("display","none"),e&&a.length&&d<=t-r-d?((_=a).attr("data-current",""),p.not(_).removeAttr("data-current"),f=_.attr("data-id"),C()):(!e&&l.length&&i-c-u<=u||!e&&l.length&&0==o)&&((_=l).attr("data-current",""),p.not(_).removeAttr("data-current"),f=_.attr("data-id"),C())}function w(){r.css("pointer-events","none")}function b(){r.css("pointer-events","auto")}function C(e){var t=e||n.filter("[data-id="+f+"]");s=t.children().eq(0).addClass("single-product-about__dot--current"),n.find(".single-product-about__dot--current").not(s).removeClass("single-product-about__dot--current")}function y(){i.addClass("zoom"),e.addClass("hide")}function x(){i.removeClass("zoom"),e.removeClass("hide")}function k(){var e=r.scrollTop();_.removeAttr("data-current");var t=(_=_.next().length?_.next().attr("data-current",""):_.parent().find(".single-product-about__media-item:first-child").attr("data-current","")).position().top,i=(_.is(".below")?e+t-100:e+t)/l;$("html, body").animate({scrollTop:d+i*l},700)}function T(){var e=r.scrollTop();_.removeAttr("data-current");var t=(_=_.prev().length?_.prev().attr("data-current",""):_.parent().find(".single-product-about__media-item:last-child").attr("data-current","")).position().top,i=(_.is(".below")?e+t-100:e+t)/l;$("html, body").animate({scrollTop:d+i*l},700)}C(),v(),$window.on("orientationchange",function(){i.css("transition-duration","0s"),p.css("transition-duration","0s")}),$window.on("resize",function(){window.orientation!==a&&(d=o.offset().top,v(),i.css("transition-duration","0.5s"),p.css("transition-duration","1.5s"),a=window.orientation)}),1<p.length?(is_body_touch||(window.addEventListener("wheel",function(e){if(!e.isTrusted){var t=$(this).scrollTop();$(this).scrollTop(t+e.deltaY)}}),r[0].addEventListener("wheel",function(e){e.preventDefault();var t=normalizeWheel(e),i=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,deltaY:t.pixelY});window.dispatchEvent(i)})),r.on("scroll",function(){p.each(function(){$(this).position().top<=100&&-100<$(this).position().top&&((_=$(this)).attr("data-current",""),p.not(_).removeAttr("data-current"),f=_.attr("data-id"))}),C()}),n.click(function(){var e=$(this),t=e.attr("data-id");if(window.matchMedia(mp).matches){var i=p.filter("[data-id="+t+"]");$window.off("scroll",m),$("html, body").animate({scrollTop:i.offset().top-$window.height()/2+i.height()/2},700).promise().then(function(){C(e),_=p.filter("[data-id="+t+"]"),setTimeout(function(){$window.on("scroll",m)},100)})}else{var o=r.scrollTop(),n=(i=p.filter("[data-id="+t+"]")).is(".below"),s=parseInt(i.position().top),a=(n?o+s-100:o+s)/l;$("html, body").animate({scrollTop:d+a*l},700)}}),$(".single-product-about__control[data-control=next]").click(k),$(".single-product-about__control[data-control=prev]").click(T),$(".single-product-about__zoom-next").click(function(e){e.preventDefault(),k()}),$(".single-product-about__zoom-prev").click(function(e){e.preventDefault(),T()})):($(".single-product-about__control[data-control=next]").addClass("is-invisible"),$(".single-product-about__control[data-control=prev]").addClass("is-invisible"),$(".single-product-about__zoom-next").css("cursor","default"),$(".single-product-about__zoom-prev").css("cursor","default")),$(".single-product-about__control[data-control=zoom]").on("click",function(){$("#slider_controls").toggleClass("zoom"),i.is(".zoom")?x():y()}),$(".single-product-about__zoomInOut").on("click",function(e){e.preventDefault(),$("#slider_controls").toggleClass("zoom"),i.is(".zoom")?x():y()})}function init_product_desc(){var r=$("#specs_switch"),d=r.next(),t=$("#downloads_link"),l=$("#product_specs");if(window.matchMedia(mp).matches||window.matchMedia(ml).matches)e(!0);else if(l.length)e();else{l=$("#product_specs_large");var i=$("#product_media").parent(),o=$("#large_specs_container");r.on("change",function(){product_scene&&r.prop("checked")?(scene_scrolltop=$window.scrollTop(),product_scene.enabled(!1).removePin(!0)):product_scene&&!r.prop("checked")&&(product_scene.enabled(!0).setPin(product_section[0]),$window.scrollTop(scene_scrolltop)),i.toggleClass("is-hidden"),o.toggleClass("is-hidden"),r.prop("checked")&&$window.scrollTop(o.offset().top),t.toggleClass("is-hidden"),r.next().children(".accordion-item-label__icon_close-cross").toggleClass("is-hidden"),$("#slider_dots").toggleClass("is-hidden"),$("#slider_controls").toggleClass("is-hidden");var e=$("#buyCollapse");r.prop("checked")?(aside_specs_opened=o,e.css("height",Number(e.get(0).scrollHeight)+1),t.data("height",t.height())):(aside_specs_opened=null,e.css("height",parseFloat(e.css("height"))-Number(t.data("height"))))})}function e(e){if(e){var t=$("#product_specs_mobile"),i=window.orientation;s(t,function(){a(t,{height:"0",overflow:"hidden",position:"static",visibility:"visible"})}),r.on("change",function(){r.prop("checked")?window.matchMedia(ml).matches?(a(t,{height:t.attr("data-height"),"transition-duration":"0s"}),a(d,{"border-bottom":"none"}),$(".single-product-about__right .single-product-about__buy").addClass("is-hidden"),$(".single-product-about__buy--mobile").addClass("landscape-visible")):a(t,{height:t.attr("data-height"),"transition-duration":".3s"}):window.matchMedia(ml).matches?(a(t,{height:"0","transition-duration":"0s"}),a(d,{"border-bottom":"1px solid #dcdcdc"}),$(".single-product-about__right .single-product-about__buy").removeClass("is-hidden"),$(".single-product-about__buy--mobile").removeClass("landscape-visible")):a(t,{height:"0","transition-duration":".3s"}),r.next().children(".accordion-item-label__icon_close-minus").toggleClass("is-hidden")}),$window.on("resize",function(){window.orientation!==i&&(i=window.orientation,a(t,{position:"absolute",visibility:"hidden",height:"auto"}),s(t,function(){r.prop("checked")?a(t,{height:t.attr("data-height")+"px",position:"static",visibility:"visible"}):a(t,{height:"0",position:"static",visibility:"visible"})}),0==window.orientation&&r.prop("checked")?(a(d,{"border-bottom":"1px solid #dcdcdc"}),$(".single-product-about__right .single-product-about__buy").removeClass("is-hidden"),$(".single-product-about__buy--mobile").removeClass("landscape-visible")):0!==window.orientation&&r.prop("checked")&&(a(d,{"border-bottom":"none"}),$(".single-product-about__right .single-product-about__buy").addClass("is-hidden"),$(".single-product-about__buy--mobile").addClass("landscape-visible")))})}else{var o=$("#product_short_desc"),n=r.siblings(".accordion-body");s(n,function(){a(n,{height:"0",overflow:"hidden",display:"block"})}),s(o,function(){a(o,{height:o.data("height")})}),r.on("change",function(){r.prop("checked")?(a($("#buyCollapse"),{height:Number($("#buyCollapse").get(0).scrollHeight)+1+parseFloat(l.outerHeight(!0))-parseFloat(o.attr("data-height"))}),a(o,{height:"0",overflow:"hidden"}),a(n,{height:l.outerHeight(!0)})):(a(o,{height:o.attr("data-height")},function(){o.css("overflow","visible")}),a(n,{height:"0"}),a($("#buyCollapse"),{height:Number($("#buyCollapse").get(0).scrollHeight)+1-parseFloat(l.outerHeight(!0))+parseFloat(o.attr("data-height"))})),r.next().children(".accordion-item-label__icon_close-minus").toggleClass("is-hidden")}),$window.on("resize",function(){a(n,{height:"auto"}),a(o,{height:"auto"}),s(n,function(){r.prop("checked")?a(n,{height:n.attr("data-height")+"px",display:"block"}):a(n,{height:"0",display:"block"})}),s(o,function(){r.prop("checked")?a(o,{height:"0",display:"block",overflow:"hidden"}):a(o,{height:o.attr("data-height")+"px",display:"block"},function(){o.css("overflow","visible")})})})}function s(e,t){e.attr("data-height",e.get(0).scrollHeight),t&&t()}function a(e,t,i){e.css(t),i&&e.one(transEndEventName,i)}}}function init_buy_toggle(){var i=$("#buyExpand"),o=$("#buyCollapse"),e=window.orientation;$(".js-buy-expand").click(function(){var t=$(this);if(window.matchMedia(mp).matches||window.matchMedia(ml).matches){if(t.is(".js-clicked"))return $(".js-buy-expand").removeClass("js-clicked"),void $(".js-buy-collapse").eq(0).trigger("click");$(".js-buy-expand").addClass("js-clicked"),i=$("#shopsMobile")}else o.css("height",o.get(0).scrollHeight),o.css({opacity:"0",height:"0"}),setTimeout(function(){if("aside"===t.data("target-view")){var e=$("#shopsAside");null!==aside_specs_opened?aside_specs_opened.addClass("is-hidden"):($("#product_media").parent().addClass("is-hidden"),$("#slider_dots").toggleClass("is-hidden"),$("#slider_controls").toggleClass("is-hidden"),product_scene&&(scene_scrolltop=$window.scrollTop(),product_scene.enabled(!1).removePin(!0))),e.removeClass("is-hidden"),$window.scrollTop(e.offset().top)}},300);i.css({opacity:"1",height:i.get(0).scrollHeight})}),$(".js-buy-collapse").click(function(){var e=$(this);window.matchMedia(mp).matches||window.matchMedia(ml).matches||(o.css({opacity:"1",height:parseInt(o.get(0).scrollHeight)+1}),setTimeout(function(){e.is("[data-aside-view]")&&($("#shopsAside").addClass("is-hidden"),null!==aside_specs_opened?(aside_specs_opened.removeClass("is-hidden"),$window.scrollTop(aside_specs_opened.offset().top)):($("#product_media").parent().removeClass("is-hidden"),$("#slider_dots").toggleClass("is-hidden"),$("#slider_controls").toggleClass("is-hidden"),product_scene&&(product_scene.enabled(!0).setPin(product_section[0]),$window.scrollTop(scene_scrolltop))))},300)),i.css({opacity:"0",height:"0"})}),$window.on("resize",function(){window.orientation!==e&&(e=window.orientation,$(".js-buy-expand").is(".js-clicked")&&(i.css({height:"auto"}),i.css({height:i.get(0).scrollHeight})))})}function init_sonar_icons_heights(){function e(){var e=$(".single-product-optional-screen-svg-icons__icon");if(window.matchMedia(mp).matches)e.find("svg, img").css("height","100px");else{var t=[];e.each(function(){t.push($(this).height())});var i=Math.max.apply(null,t);e.each(function(){$(this).css("height",i)})}}$window.on("resize",e),e()}function init_pointers_module(){var e=$("#pointers");if(e.length){var t=e.find(".single-product-optional-screen-svg-icons__icon"),i=t.filter(".js-icon-core");if($body.is(".touch")){var o=i;t.click(function(){var e=$(this);e.is(o)||o.removeClass("is-animating"),e.addClass("is-animating"),o=e})}else t.hover(function(){var e=$(this);e.is(".js-icon-core")||(i.removeClass("is-animating"),e.addClass("is-animating"))},function(){var e=$(this);e.is(".js-icon-core")||(e.removeClass("is-animating"),i.addClass("is-animating"))})}}function init_wallpapers(){var e=$(".wallpaper");$window.on("scroll",function(){e.each(function(){var e=$(this);e.is(".animated")||$window.scrollTop()>=e.offset().top-.7*$window.height()&&e.addClass("fadeInUp animated is-visible")})})}function init_variety(){if($("#variety").length){var e=$(".accordion-unit__input"),n=$(".variety input:checked"),s=$(".accordion-unit__content");$window.on("resize",function(){t(s)}),t(s),e.on("change",function(){var e,t,i=$(this),o=i.siblings("div");a(o,{height:o.attr("data-height")}),function(e){if(window.matchMedia(mp).matches||window.matchMedia(ml).matches)var t=s.find("#"+e);else var t=$("#"+e);t.addClass("variety__media-item_active")}(i.prop("value")),a((e=n).siblings("div"),{height:"0"}),t=e.prop("value"),window.matchMedia(mp).matches||window.matchMedia(ml).matches?s.find("#"+t).removeClass("variety__media-item_active"):$("#"+t).removeClass("variety__media-item_active"),n=i})}function t(e){e.each(function(){var e,t,i,o=$(this),n=o.find("div").outerHeight();t=n,i=function(){o.siblings("input").prop("checked")&&a(o,{height:o.attr("data-height")})},(e=o).attr("data-height",t),i(e)})}function a(e,t){e.css(t)}}function init_explore_colors(s){var a=$("#explore_colors");if(a.length){var e=a.find("input"),r=a.find("input:checked"),d=$("#explore_title"),i=$("#explore_wallpapers"),o=$window.height(),l=a.data("animation"),c=f(),u=new ScrollMagic.Scene({triggerElement:"#explore_colors",triggerHook:0,reverse:!0}).setPin("#explore_colors").addTo(s);switch(l){case 0:var h=_();u.duration(c.duration_0),u.on("progress",function(){var e=u.progress();i.scrollTop(e*h)});break;case 1:$(".explore-colors__wallpaper").addClass("explore-colors__wallpaper_flash");var n,p=[];u.duration(c.duration_1),g();break;default:console.log("[Explore-colors] Incorrect animation type")}e.on("change",function(){var e=$(this),t=e.attr("value"),i=e.attr("data-title-value"),o=e.attr("data-text-color"),n=r.attr("value");c=f(t),a.addClass("is-fade-out"),a.one(transEndEventName,function(){if($("."+n).addClass("is-hidden"),$("."+t).removeClass("is-hidden").css("color",""+o),d.css("color",""+o),d.children().length?d.children().eq(0).text(i):d.text(i),0==l)u.duration(c.duration_0),h=_();else{if(1!=l)return void console.log("[Explore-colors] Incorrect animation type");p=[],u.duration(c.duration_1),g()}u.progress(0),s.scrollTo(u),r=e,a.removeClass("is-fade-out")})})}function g(){(n=c.collection).eq(0).addClass("is-fade-in"),n.each(function(e){var t=this,i=new ScrollMagic.Scene({offset:u.scrollOffset()+e*o,duration:o,triggerHook:0,reverse:!0}).addTo(s);switch(e){case 0:i.on("enter",function(){$(t).addClass("is-fade-in")}),i.on("leave",function(e){"FORWARD"===e.scrollDirection&&$(t).removeClass("is-fade-in")});break;case n.length-1:i.on("enter",function(){$(t).addClass("is-fade-in")}),i.on("leave",function(e){"REVERSE"===e.scrollDirection&&$(t).removeClass("is-fade-in")});break;default:i.setClassToggle(t,"is-fade-in")}p.push(i)})}function _(){return i[0].scrollHeight-$window.height()}function f(e){var t=e||r.attr("value");return{duration_0:(i.find("."+t).length-1)*$window.height(),duration_1:i.find("."+t).length*$window.height(),collection:i.find("."+t)}}}function init_scroll_scenes(){var e=$("#explore_colors"),t=$("#growing_section");if(e.length||t.length)var i=new ScrollMagic.Controller;e.length&&init_explore_colors(i),t.length&&init_growing_section(i)}function get_scrollbar_width(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function normalizeWheel(e){var t=0,i=0,o=0,n=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),o=t*PIXEL_STEP,n=i*PIXEL_STEP,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||n)&&e.deltaMode&&(1==e.deltaMode?(o*=LINE_HEIGHT,n*=LINE_HEIGHT):(o*=PAGE_HEIGHT,n*=PAGE_HEIGHT)),o&&!t&&(t=o<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:t,spinY:i,pixelX:o,pixelY:n}}function restartMarquee(){var e=$(".single-product-where-to-by__partners > div");$window.on("orientationchange",function(){e.removeClass("animation"),e.each(function(){this.offsetWidth,$(this).addClass("animation")})})}$(function(){is_body_touch=$body.is(".touch"),init_slider(),init_product_description(),init_product_desc(),init_buy_toggle(),init_wallpapers(),init_pointers_module(),init_scroll_scenes(),restartMarquee(),$(".shop-tile").hover(function(){var e=$(this);$(this).removeClass("is-hovered is-unhovered"),setTimeout(function(){e.addClass("is-hovered")},10)},function(){$(this).addClass("is-unhovered")})}),$(window).on("load",function(){init_variety()});